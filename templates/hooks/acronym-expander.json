{
  "name": "Acronym Expander",
  "description": "Automatically expands configured acronyms in prompts",
  "event": "UserPromptSubmit",
  "enabled": true,
  "priority": 150,
  "requirements": {
    "commands": ["cat", "jq", "echo", "grep", "tr", "pwd"],
    "env": [],
    "files": []
  },
  "script": "#!/bin/bash\n\n# Read the prompt from stdin\nprompt=$(cat)\n\n# Get the project root (current working directory)\nPROJECT_ROOT=\"$(pwd)\"\n\n# Get the acronyms config path\nacronyms_file=\"${PROJECT_ROOT}/.memento/acronyms.json\"\n\n# Check if acronyms config exists\nif [ ! -f \"$acronyms_file\" ]; then\n  echo \"$prompt\"\n  exit 0\nfi\n\n# Read acronyms config\nacronyms_json=$(cat \"$acronyms_file\" 2>/dev/null || echo '{}')\n\n# Extract settings\ncase_sensitive=$(echo \"$acronyms_json\" | jq -r '.settings.caseSensitive // false')\nwhole_word=$(echo \"$acronyms_json\" | jq -r '.settings.wholeWordOnly // true')\n\n# Get all acronyms\nacronyms=$(echo \"$acronyms_json\" | jq -r '.acronyms // {} | to_entries | .[] | \"\\(.key)|\\(.value)\"')\n\n# Track detected acronyms\ndetected_acronyms=\"\"\n\n# Check each acronym\nwhile IFS='|' read -r acronym expansion; do\n  if [ -z \"$acronym\" ]; then\n    continue\n  fi\n  \n  # Build the search pattern\n  if [ \"$whole_word\" = \"true\" ]; then\n    pattern=\"\\\\b${acronym}\\\\b\"\n  else\n    pattern=\"$acronym\"\n  fi\n  \n  # Check if acronym exists in prompt\n  if [ \"$case_sensitive\" = \"true\" ]; then\n    if echo \"$prompt\" | grep -q \"$pattern\"; then\n      detected_acronyms=\"${detected_acronyms}- **${acronym}**: ${expansion}\\n\"\n    fi\n  else\n    if echo \"$prompt\" | grep -qi \"$pattern\"; then\n      # For case-insensitive, show the uppercase version\n      display_acronym=$(echo \"$acronym\" | tr '[:lower:]' '[:upper:]')\n      detected_acronyms=\"${detected_acronyms}- **${display_acronym}**: ${expansion}\\n\"\n    fi\n  fi\ndone <<< \"$acronyms\"\n\n# If any acronyms were detected, prepend glossary\nif [ -n \"$detected_acronyms\" ]; then\n  echo -e \"## Acronym Glossary\\n${detected_acronyms}\\n---\\n\\n${prompt}\"\nelse\n  echo \"$prompt\"\nfi"
}